# taskcon 要件仕様書

## 概要
taskconは、PythonのTkinterを使用した多機能タスク管理アプリケーションです。タスクの作成、編集、削除、フィルタリング、ソート、CSV保存機能を提供します。

## 基本機能

### 1. タスク管理
- **タスク作成**: タスク名、優先度、期限日、タグ、今日やるフラグを設定
- **タスク編集**: 既存タスクの内容を変更
- **タスク削除**: 選択したタスクを削除
- **タスク状態管理**: 完了/未着手の切り替え
- **今日やる管理**: 今日やるタスクの設定/解除

### 2. 表示機能
- **3つのタブ**: 一覧（未完了タスク）、今日（今日やるタスク）、完了（完了タスク）
- **表形式表示**: Treeviewを使用した列付きの表形式
- **色分け表示**: 
  - 期限切れタスク: 赤字
  - 完了タスク: グレー
  - 未完了タスク: 黒字
- **チェックボックス**: 各タスクにチェックボックス（初期状態は未チェック）

### 3. 列構成
- **選択**: チェックボックス（30px幅）
- **優先度**: [高][中][低]の表示（60px幅）
- **状態**: [未着手][完了]の表示（80px幅）
- **タスク名**: タスク名（300px幅）
- **期限日**: YYYY-MM-DD形式（100px幅）
- **タグ**: タグ情報（100px幅）

### 4. フィルタリング・ソート
- **検索機能**: タスク名・タグでの検索
- **状態フィルター**: すべて/未着手/完了
- **ソート機能**: 追加順/期限順/優先度順/タグ順
- **タブ別表示**: 各タブで適切なタスクを表示

### 5. 入力機能
- **タスク名**: テキスト入力
- **優先度**: ドロップダウン（高/中/低）
- **期限日**: カレンダーウィジェット（tkcalendar）
- **タグ**: ドロップダウン + 自由入力（カンマ区切り）
- **今日やる**: ドロップダウン（〇/空）

### 6. データ永続化
- **CSV保存**: タスクデータをCSVファイルに保存
- **タグ保存**: タグリストをTXTファイルに保存
- **設定可能なデータフォルダ**: 設定画面でデータフォルダの保存場所を変更可能

## 詳細仕様

### ファイル構成
- **メインファイル**: main.py
- **データフォルダ**: taskcon_data/（デフォルト）
  - **タスクデータ**: tasks.csv
  - **タグデータ**: tags.txt
- **設定**: 設定画面で変更可能

### CSVファイル形式
```csv
id,name,status,priority,due_date,tags,today
```

### タグ管理
- 既存タスクからタグを自動抽出
- 未使用タグの自動クリーンアップ
- ドロップダウン + 自由入力対応

### チェックボックス機能
- クリックで選択/解除
- 複数選択対応
- 選択状態はCSVに保存しない（メモリ上のみ）
- 初期状態は未チェック

### 操作ボタン
1. **完了 / 未着手**: 選択タスクの状態切り替え
2. **今日 / 今日以外**: 選択タスクの今日やるフラグ切り替え
3. **削除**: 選択タスクの削除
4. **設定**: データフォルダパス設定画面を開く
5. **終了**: アプリケーション終了

### 設定機能
- **設定ウィンドウ**: モーダルダイアログ
- **データフォルダ設定**: データフォルダのパス変更
- **フォルダ選択ダイアログ**: 参照ボタンでフォルダ選択
- **デフォルト設定**: main.pyと同じ場所のtaskcon_dataフォルダ

### 表示制御
- **一覧タブ**: 未完了タスク + 今日やるフラグがOFFのタスク
- **今日タブ**: 今日やるフラグがONの未完了タスク（完了タスクは表示しない）
- **完了タブ**: 完了状態のタスク
- **期限切れ判定**: 期限日が今日より前のタスクを赤字表示

### エラーハンドリング
- ファイル読み込みエラー時のメッセージ表示
- ファイル保存エラー時のメッセージ表示
- 入力値検証（タスク名必須など）
- データフォルダが存在しない場合の自動作成

## 技術仕様

### 使用ライブラリ
- **tkinter**: GUIフレームワーク
- **tkcalendar**: カレンダーウィジェット
- **tkinterdnd2**: ドラッグ&ドロップ機能（現在は無効化）
- **csv**: CSVファイル操作
- **datetime**: 日付処理
- **uuid**: ユニークID生成

### ウィンドウ設定
- **タイトル**: taskcon
- **サイズ**: 700x650
- **背景色**: #f0f0f0
- **フォント**: Yu Gothic UI（Windows）、Hiragino Sans（macOS）

### データ構造
```python
task = {
    "id": "ユニークID",
    "name": "タスク名",
    "status": "未着手/完了",
    "priority": "高/中/低",
    "due_date": "YYYY-MM-DD",
    "tags": "タグ1,タグ2",
    "today": "〇/空"
}
```

## 実装済み機能

### 基本機能
- ✅ タスクの作成、編集、削除
- ✅ 状態管理（完了/未着手）
- ✅ 今日やる管理
- ✅ 3つのタブ表示（一覧、今日、完了）
- ✅ 表形式表示（Treeview）
- ✅ 色分け表示
- ✅ チェックボックス機能

### フィルタリング・ソート
- ✅ 検索機能（タスク名・タグ）
- ✅ 状態フィルター
- ✅ ソート機能（追加順、期限順、優先度順、タグ順）
- ✅ タブ別フィルタリング

### データ管理
- ✅ CSV保存・読み込み
- ✅ タグ管理（自動抽出、クリーンアップ）
- ✅ データフォルダ設定
- ✅ エラーハンドリング

### UI/UX
- ✅ カレンダーウィジェット
- ✅ タグのドロップダウン + 自由入力
- ✅ 複数選択対応
- ✅ 設定画面

## 制約事項
- チェックボックスの状態はCSVに保存されない
- ドラッグ&ドロップ機能は現在無効化
- 複数選択時の編集機能は制限あり
- データフォルダ設定はアプリケーション再起動まで有効

## 今後の拡張可能性
- チェックボックス状態の永続化
- ドラッグ&ドロップ機能の復活
- 複数選択時の編集機能改善
- 設定の永続化
- テーマ・カスタマイズ機能
- データのエクスポート・インポート機能
- タスクの優先度変更機能
- 期限日の一括設定機能